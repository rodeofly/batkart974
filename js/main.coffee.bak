
unique_id=1
couleurs = 
  "Nombres & Calculs": "bleuNC"
  "Organisation & gestion de données, fonctions": "MauveOGD"
  "Espace & géométrie": "jauneEG"
  "Grandeurs & mesures": "vertGM"
  "Algorithmique & programmation": "orangeAP"
  
citations =
  "Nombres & Calculs": "Chinoi la la pa bien rende a moin la monai"
  "Organisation & gestion de données, fonctions": "A koz un pak 6 y revien plu cher ?"
  "Espace & géométrie": "Dabor un pié apré un karo"
  "Grandeurs & mesures": "Meziré y kass pa le bra"
  "Algorithmique & programmation": "Y fé pa la bou avan la pli"
niveaux =
  "Nombres & Calculs" :
    "Utiliser les nombres pour comparer, calculer et résoudre des problèmes" :
      "Enchaînements d'opérations":
        "Calculer avec des nombres décimaux sans parenthèses" : 1
        "Calculer avec des nombres décimaux avec parenthèses" : 1
      "Nombres relatifs":
        "Comparer des nombres relatifs" : 1
        "Additionner des nombres relatifs" : 1
        "Donner l'opposé d'un nombre relatif": 1
        "Soustraire des nombres relatifs": 1
        "Calculer avec des nombres relatifs en respectant les priorités des opérations": 2
        "Repérer et placer des nombres relatifs sur une demi-droite graduée adaptée": 1
        "Multiplier des nombres relatifs": 2
        "Diviser des nombres relatifs": 2
      "Fractions" :
        "Donner diverses désignations de fractions": 1
        "Déterminer si des fractions sont égales": 1
        "Simplifier une fraction": 1
        "Additionner et soustraire des fractions": 2
        "Multiplier des fractions": 2
        "Diviser des fractions": 2
      "Racines carrées" :
        "Carrés parfaits et notion de racine carrée": 2
        "Encadrer une racine carrée par deux nombres entiers": 2
      "Puissances" :
        "Puissances d'un nombre": 2
        "Puissances de 10": 2
        "Multiplier par une puissance de 10": 2
        "Opérations avec les puissances": 2
        "Écriture scientifique": 2
    "Comprendre et utiliser les notions de divisibilité et de nombres premiers":
      "Nombres entiers et divisibilité":
        "Rendre une fraction irréductible par décomposition en facteurs de nombres premiers": 3
        "Déterminer si un entier est divisible ou non par un autre entier": 3
        "Utiliser les critères de divisibilité par 2, 3, 4, 5, 9 et 10": 1
        "Division euclidienne": 1
    "Utiliser le calcul littéral":
      "Calcul littéral":
        "Simplifier une expression littérale": 1
        "Réduire une expression littérale": 1
        "Utiliser une expression littérale" : 1
        "Tester une égalité": 1
        "Développer une expression avec la simple distributivité": 2
        "Développer une expression avec la double distributivité": 3
        "Factoriser une expression": 2
      "Équations et inéquations":
        "Modéliser un problème par une équation": 2
        "Résoudre des problèmes du 1er degré de façon exacte ou approchée": 2
        "Résoudre une équation": 2
        "Résoudre une inéquation": 2
  "Organisation & gestion de données, fonctions":
    "Interpréter, représenter et traiter des données":
      "Interpréter, représenter et traiter des données":
        "Lire un outil statistique": 1
        "Construire un outil statistique": 1
        "Utiliser le tableur": 1
        "Calculer des effectifs et des fréquences": 1
        "Calculer et interpréter la moyenne": 3
        "Calculer et interpréter unela médiane d'une série statistique": 3
        "Calculer et interpréter l'étendue d'une série statistique": 3
    "Comprendre et utiliser des notions élémentaires de probabilités":
      "Probabilités":
        "Utiliser le vocabulaire des probabilités : expérience aléatoire, issues, évènements, univers, événement certain, impossible": 1
        "Utiliser le vocabulaire des probabilités : événements contraires, incompatibles, équiprobabilité": 2
        "Calculer des probabilités dans des cas simples (avec la fréquence)": 1
        "Calculer la probabilité d'un événement (expérience aléatoire à deux épreuves)": 3
        "Réaliser un arbre pondéré": 3
    "Résoudre des problèmes de proportionnalité":
      "Proportionnalité":
        "Utiliser et calculer l'échelle d'une carte, d'un plan…": 1
        "Reconnaître une situation de proportionnalité ou de non proportionnalité": 1
        "Calculer une quatrième proportionnelle (coefficient, linéarité, retour à l’unité, règle de trois)": 1
      "Pourcentage":
        "Appliquer et calculer un pourcentage": 1
    "Comprendre et utiliser la notion de fonction":
      "Fonctions":
        "Notion de fonction : différentes représentations et notations": 3
        "Déterminer l'image ou l'antécédent d'un nombre par une fonction à partir d'un graphique ou d’un tableau": 3
        "Fonctions linéaires": 3
        "Fonctions affines": 3
        "Déterminer par le calcul l'image d'un nombre par une fonction affine ou linéaire": 3
        "Déterminer par le calcul l'antécédent d'un nombre par une fonction affine ou linéaire (équation)": 3
  "Espace & géométrie":
    "Représenter l'espace":
      "Se repérer dans le plan":
        "Se repérer sur une droite graduée": 1
        "Se repérer dans un repère orthogonal": 1
      "Géométrie dans l'espace":
        "Utiliser, produire et mettre en relation des représentations de solides et des situations spatiales": 1
        "Se repérer sur une sphère": 3
        "Se repérer dans un pavé droit": 3
    "Utiliser les notions de géométrie plane pour démontrer":
      "Triangles":
        "Construire des triangles": 1
        "Tracer la hauteur d'un triangle": 1
        "Déterminer si un triangle est constructible ou non en utilisant l'inégalité triangulaire": 1
        "Utiliser la règle des 180°": 1
        "Déterminer si des triangles sont semblables": 3
      "Cercles et disques":
        "Connaître le vocabulaire du cercle et du disque": 1
        "Tracer un cercle (ou un disque) de rayon donné": 1
      "Parallélogrammes":
        "Construire un parallélogramme et utiliser les propriétés du parallélogramme": 1
        "Construire des parallélogrammes particuliers et utiliser les propriétés des parallélogrammes particuliers": 1
      "Médiatrices":
        "Tracer la médiatrice d'un segment avec le compas et la règle non graduée": 1
        "Utiliser les propriétés de la médiatrice": 1
      "Trigonométrie":
        "Calculer une longueur avec cosinus, sinus ou tangente": 3
        "Calculer un angle avec cosinus, sinus ou tangente": 3
      "Théorème de Pythagore et sa réciproque":
        "Calculer une longueur avec le théorème de Pythagore": 2
        "Vérifier si un triangle est rectangle ou non avec la réciproque de Pythagore": 2
      "Théorème de Thalès et sa réciproque":
        "Calculer une longueur avec le théorème de Thalès": 3
        "Vérifier si des droites sont parallèles ou non avec la réciproque de Thalès": 3 
      "Angles":
        "Utiliser les angles alternes-internes pour montrer que des droites sont parallèles ou non" : 1
      "Transformations":
        "Utiliser une rotation sur une figure": 3
        "Coder une figure": 1
        "Utiliser une homothétie sur une figure": 3 
        "Utiliser une translation sur une figure": 2
        "Compléter et construire le symétrique d'une figure par rapport à un axe ou un point": 1
        "Utiliser les propriétés de conservation de la symétrie": 1
  "Grandeurs & mesures":
    "Calculer avec des grandeurs mesurables ; Exprimer les résultats dans les unités adaptées":
      "Périmètre":
        "Convertir des unités de longueurs":1
        "Calculer le périmètre d'une figure en utilisant une formule":1
        "Calculer le périmètre d'une figure composée de figures simples":1
      "Aires":
        "Convertir des unités d'aires":1
        "Calculer l'aire d'une figure en utilisant une formule":1
        "Calculer l'aire d'une figure composée de figures simples":1
      "Volumes":
        "Convertir des unités de volume":1
        "Convertir des unités de contenance":1
        "Relier des unités de volume et de contenance":1
        "Calculer le volume d'un solide en utilisant une formule":1
      "Grandeurs composées":
        "Grandeurs produits":2
        "Grandeurs quotients":2
      "Durées":
        "Convertir des unités de durée":1
        "Calculer une durée":1
      "Échelle":
        "Utiliser et calculer l'échelle":1
      "Angles":
        "Mesurer et construire des angles":1
    "Comprendre l'effet de quelques transformations sur des grandeurs géométriques":
      "Agrandissement et réduction":
        "Utiliser un déplacement, d'un agrandissement ou d'une réduction sur les longueurs, les aires, les volumes et les angles": 3


  "Algorithmique & programmation":
    "Écrire, mettre au point et exécuter un programme simple":
      "Écriture d'un programme":
        "Écrire, mettre au point (tester, corriger) et exécuter un programme en réponse à un programme donné": 1
      "Programmation en parallèle":
        "Écrire un programme dans lequel des actions sont déclenchées par des évènements extérieurs":1
        "Programmer des scripts se déroulant en parallèle":1
        "Déclenchement d'une action par un événement":1
      "Éléments algorithmiques":
        "Notion de variable informatique":1
        "Utilisation de boucles":1
        "Utilisation d'instructions conditionnelles":1

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
class CardSet
  constructor: (@theme, @attendus) ->
    @set = []
    numero_attendu = 0
    nombre_attendus = Object.keys(@attendus).length
    for attendu, notions of @attendus
      numero_attendu++
      numero_notion = 0
      nombre_notions = Object.keys(notions).length
      for notion, competences of notions
        numero_notion++
             
        recto = $("<div class='face recto #{couleurs[@theme]}'></div>")
        recto.append "<div class='theme'>#{@theme}</div>"
        recto.append "<div class='citation'>#{citations[@theme]}</div>"
        recto.append "<div class='attendu'>#{attendu}<br>(n° #{numero_attendu} / #{nombre_attendus})</div>"
        recto.append "<div class='notion'>#{notion}</div>"
      
        verso = $("<div class='face verso #{couleurs[@theme]}'></div>")     
        verso.append "<div class='theme'>#{@theme}</div>"
        verso.append "<ul id='attendus'></ul>"
        
        a=0
        for attenduV, notions of @attendus
          a++
          if a is numero_attendu
            verso.find( "#attendus" ).append """
            <li class='attendu'>#{attenduV}
              <ol id='notions'></ol>
            </li>
            """
            n = 0
            for notionV, competencesV of notions
              n++      
              if (n is numero_notion)
                verso.find("#notions").append """
                <li class='notion'>#{notionV}
                  <ul id='competences'></ul>
                </li>"""
                for competence, niveau of competencesV
                  verso.find("#competences").append "<li>#{competence}: <img class='star' src='img/#{niveau}star.png'></li>"
              else verso.find("#notions").append( "<li class='notion'>#{notionV}</li>" )
          else verso.find( "#attendus" ).append "<li class='attendu'>#{attenduV}</li>"
        
        carte = $("<div></div>")
        carte.append "<div id='#{unique_id++}' class='carte'></div>"
        carte.find(".carte")
          .append "<h1>Carte ##{unique_id-1}</h1>"
          .append(recto)
          .append(verso)
        @set.push carte.html()
      
  
$ ->
  alert "go"
  for theme,attendus of niveaux
    set = new CardSet theme, attendus
    for s in set.set
      $( "body" ).append s
